{"version":3,"sources":["../../server/controllers/listingController.js"],"names":["getAllListings","listings","find","sort","created","limit","getSingleListing","_id","listing","addNewListing","args","save","updateListing","findOneAndUpdate","new","runValidators","deleteListing","deleteOne"],"mappings":";;;;;;;AAAA;;;;;;AAEA,MAAMA,iBAAiB,YAAY;AACjC,QAAMC,WAAW,MAAM,mBAASC,IAAT,CAAc,EAAd,EACpBC,IADoB,CACf,EAAEC,SAAS,MAAX,EADe,EAEpBC,KAFoB,CAEd,CAFc,CAAvB;;AAIA,SAAOJ,QAAP;AACD,CAND;;AAQA,MAAMK,mBAAmB,MAAOC,GAAP,IAAe;AACtC,QAAMC,UAAU,MAAM,mBAASN,IAAT,CAAc,EAAEK,GAAF,EAAd,CAAtB;AACA,MAAI,CAACC,OAAL,EAAc;AACZ,WAAO,wBAAP;AACD;AACD,SAAOA,OAAP;AACD,CAND;;AAQA,MAAMC,gBAAgB,MAAOC,IAAP,IAAgB;AACpC,QAAMF,UAAU,MAAO,uBAAaE,IAAb,CAAD,CAAqBC,IAArB,EAAtB;AACA,SAAOH,OAAP;AACD,CAHD;;AAKA,MAAMI,gBAAgB,MAAOF,IAAP,IAAgB;AACpC,QAAMF,UAAU,MAAM,mBAASK,gBAAT,CACpB,EAAEN,KAAKG,KAAKH,GAAZ,EADoB,EACD;AACnBG,MAFoB,EAGpB;AACEI,SAAK,IADP;AAEEC,mBAAe;AAFjB,GAHoB,CAAtB;;AASA,SAAOP,OAAP;AACD,CAXD;;AAaA,MAAMQ,gBAAgB,MAAON,IAAP,IAAgB;AACpC,QAAM,mBAASO,SAAT,CAAmB,EAAEV,KAAKG,KAAKH,GAAZ,EAAnB,CAAN,CADoC,CACS;AAC9C,CAFD;;QAKEP,c,GAAAA,c;QACAM,gB,GAAAA,gB;QACAG,a,GAAAA,a;QACAG,a,GAAAA,a;QACAI,a,GAAAA,a","file":"listingController.js","sourcesContent":["import Business from '../models/Business';\r\n\r\nconst getAllListings = async () => {\r\n  const listings = await Business.find({})\r\n    .sort({ created: 'desc' })\r\n    .limit(6);\r\n\r\n  return listings;\r\n};\r\n\r\nconst getSingleListing = async (_id) => {\r\n  const listing = await Business.find({ _id });\r\n  if (!listing) {\r\n    return 'listing does not exist';\r\n  }\r\n  return listing;\r\n};\r\n\r\nconst addNewListing = async (args) => {\r\n  const listing = await (new Business(args)).save();\r\n  return listing;\r\n};\r\n\r\nconst updateListing = async (args) => {\r\n  const listing = await Business.findOneAndUpdate(\r\n    { _id: args._id }, // eslint-disable-line no-underscore-dangle\r\n    args,\r\n    {\r\n      new: true,\r\n      runValidators: true,\r\n    },\r\n  );\r\n\r\n  return listing;\r\n};\r\n\r\nconst deleteListing = async (args) => {\r\n  await Business.deleteOne({ _id: args._id }); // eslint-disable-line no-underscore-dangle\r\n};\r\n\r\nexport {\r\n  getAllListings,\r\n  getSingleListing,\r\n  addNewListing,\r\n  updateListing,\r\n  deleteListing,\r\n};\r\n"]}